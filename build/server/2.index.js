require("source-map-support").install(),exports.ids=[2],exports.modules={71:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.environment;return{height:t.height,width:t.width,isMobile:t.isMobile}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,i,o){var r=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&r)for(var a in r)void 0===n[a]&&(n[a]=r[a]);else n||(n=r||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(9),d=(i(c),n(27)),p=i(d),h=n(14),f=n(35),w=n(112),y=n(108),v=i(y),m=l(p["default"],{title:"微信 WEBAPP",titleTemplate:"%s - 服务端渲染"}),b=l(v["default"],{showUnder:500}),O=function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,e))}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e((0,w.initEnvironment)())}},{key:"render",value:function(){return l("button",{},void 0,"'right'"),l("div",{},void 0,m,this.props.children,b)}}]),t}(c.Component);O.propTypes={children:c.PropTypes.node,dispatch:c.PropTypes.func.isRequired},h.StyleSheet.create({root:{maxWidth:700,color:"#000",margin:"2rem auto"}}),t["default"]=(0,f.connect)(a)(O)},108:function(e,t,n){"use strict";var i=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,n,i,o){var r=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&r)for(var a in r)void 0===n[a]&&(n[a]=r[a]);else n||(n=r||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;s>u;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),o=n(9),r=n(214),s=n(28),a=i("span",{},void 0,i(s,{name:"ChevronUpCircle"})),l=o.createClass({displayName:"ScrollUp",data:{startValue:0,currentTime:0,startTime:null,rafId:null},propTypes:{topPosition:o.PropTypes.number,showUnder:o.PropTypes.number.isRequired,easing:o.PropTypes.oneOf(["linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"]),duration:o.PropTypes.number,style:o.PropTypes.object},getDefaultProps:function(){return{duration:250,easing:"easeOutCubic",style:{position:"fixed",bottom:50,right:30,transitionDuration:"0.3s",transitionTimingFunction:"linear",transitionDelay:"0s",display:"block",width:"50px",height:"50px",borderRadius:"50%",lineHeight:"50px",textAlign:"center",fontSize:"45px",color:"#F06066",overflow:"hidden",zIndex:"9999"},topPosition:0}},getInitialState:function(){return{show:!1}},shouldComponentUpdate:function(e,t){return t.show!==this.state.show},componentDidMount:function(){this.handleScroll(),window.addEventListener("scroll",this.handleScroll),window.addEventListener("wheel",this.stopScrolling,!1),window.addEventListener("touchstart",this.stopScrolling,!1)},componentWillUnmount:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("wheel",this.stopScrolling,!1),window.removeEventListener("touchstart",this.stopScrolling,!1)},handleScroll:function(){window.scrollY>this.props.showUnder?this.setState({show:!0}):this.setState({show:!1})},handleClick:function(){this.stopScrolling(),this.data.startValue=window.scrollY,this.data.currentTime=0,this.data.startTime=null,this.data.rafId=window.requestAnimationFrame(this.scrollStep)},scrollStep:function(e){this.data.startTime||(this.data.startTime=e),this.data.currentTime=e-this.data.startTime;var t=r[this.props.easing](this.data.currentTime,this.data.startValue,this.props.topPosition,this.props.duration);window.scrollY<=this.props.topPosition?this.stopScrolling():(window.scrollTo(window.scrollY,t),this.data.rafId=window.requestAnimationFrame(this.scrollStep))},stopScrolling:function(){window.cancelAnimationFrame(this.data.rafId)},render:function(){var e=this.props.style,t=i("div",{style:e,onClick:this.handleClick},void 0,a),n=Object.assign({},e);return n.opacity=this.state.show?.8:0,n.visibility=this.state.show?"visible":"hidden",n.transitionProperty="opacity, visibility",o.cloneElement(t,{style:n})}});e.exports=l},112:function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return{type:u.CHANGE_IS_MOBILE,isMobile:e}}function r(e,t){return{type:u.CHANGE_WIDTH_AND_HEIGHT,height:e,width:t}}function s(){return function(e){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);e(o(t)),e(r(window.innerHeight,window.innerWidth)),window.onresize=function(){e(r(window.innerHeight,window.innerWidth))}}}function a(e,t){return{type:u.PAGES_INITSTATE,store:e,scoll:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeWidthAndHeight=r,t.initEnvironment=s,t.pagesInitialState=a;var l=n(15),u=i(l)},214:function(e,t){e.exports=require("tween-functions")}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vMi5pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcm91dGVzL0FwcC9jb21wb25lbnRzL0FwcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9TY3JvbGxVcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcm91dGVzL0FwcC9hY3Rpb25zLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcInR3ZWVuLWZ1bmN0aW9uc1wiIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJpbnN0YWxsIiwiZXhwb3J0cyIsImlkcyIsIm1vZHVsZXMiLDcxLCJtb2R1bGUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsImNhbGwiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIm1hcFN0YXRlVG9Qcm9wcyIsInN0YXRlIiwiZW52aXJvbm1lbnQiLCJoZWlnaHQiLCJ3aWR0aCIsImlzTW9iaWxlIiwiZGVmaW5lUHJvcGVydHkiLCJfanN4IiwiUkVBQ1RfRUxFTUVOVF9UWVBFIiwiU3ltYm9sIiwidHlwZSIsInByb3BzIiwia2V5IiwiY2hpbGRyZW4iLCJkZWZhdWx0UHJvcHMiLCJjaGlsZHJlbkxlbmd0aCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInByb3BOYW1lIiwiY2hpbGRBcnJheSIsIkFycmF5IiwiaSIsIiQkdHlwZW9mIiwidW5kZWZpbmVkIiwicmVmIiwiX293bmVyIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfcmVhY3QiLCJfcmVhY3RIZWxtZXQiLCJfcmVhY3RIZWxtZXQyIiwiX2FwaHJvZGl0ZSIsIl9yZWFjdFJlZHV4IiwiX2FjdGlvbnMiLCJfU2Nyb2xsVXAiLCJfU2Nyb2xsVXAyIiwiX3JlZiIsInRpdGxlIiwidGl0bGVUZW1wbGF0ZSIsIl9yZWYyIiwic2hvd1VuZGVyIiwiQXBwIiwiX0NvbXBvbmVudCIsInRoaXMiLCJnZXRQcm90b3R5cGVPZiIsImRpc3BhdGNoIiwiaW5pdEVudmlyb25tZW50IiwiQ29tcG9uZW50IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwibm9kZSIsImZ1bmMiLCJpc1JlcXVpcmVkIiwiU3R5bGVTaGVldCIsInJvb3QiLCJtYXhXaWR0aCIsImNvbG9yIiwibWFyZ2luIiwiY29ubmVjdCIsMTA4LCJSZWFjdCIsIlR3ZWVuRnVuY3Rpb25zIiwiU1ZHIiwibmFtZSIsIlNjcm9sbFVwIiwiY3JlYXRlQ2xhc3MiLCJkaXNwbGF5TmFtZSIsImRhdGEiLCJzdGFydFZhbHVlIiwiY3VycmVudFRpbWUiLCJzdGFydFRpbWUiLCJyYWZJZCIsInRvcFBvc2l0aW9uIiwibnVtYmVyIiwiZWFzaW5nIiwib25lT2YiLCJkdXJhdGlvbiIsInN0eWxlIiwib2JqZWN0IiwiZ2V0RGVmYXVsdFByb3BzIiwicG9zaXRpb24iLCJib3R0b20iLCJyaWdodCIsInRyYW5zaXRpb25EdXJhdGlvbiIsInRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbiIsInRyYW5zaXRpb25EZWxheSIsImRpc3BsYXkiLCJib3JkZXJSYWRpdXMiLCJsaW5lSGVpZ2h0IiwidGV4dEFsaWduIiwiZm9udFNpemUiLCJvdmVyZmxvdyIsInpJbmRleCIsImdldEluaXRpYWxTdGF0ZSIsInNob3ciLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJuZXh0UHJvcHMiLCJuZXh0U3RhdGUiLCJjb21wb25lbnREaWRNb3VudCIsImhhbmRsZVNjcm9sbCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wU2Nyb2xsaW5nIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2Nyb2xsWSIsInNldFN0YXRlIiwiaGFuZGxlQ2xpY2siLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzY3JvbGxTdGVwIiwidGltZXN0YW1wIiwic2Nyb2xsVG8iLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlbmRlciIsInByb3BTdHlsZSIsImVsZW1lbnQiLCJvbkNsaWNrIiwiYXNzaWduIiwib3BhY2l0eSIsInZpc2liaWxpdHkiLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJjbG9uZUVsZW1lbnQiLDExMiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJuZXdPYmoiLCJoYXNPd25Qcm9wZXJ0eSIsImNoYW5nZUlzTW9iaWxlIiwidHlwZXMiLCJDSEFOR0VfSVNfTU9CSUxFIiwiY2hhbmdlV2lkdGhBbmRIZWlnaHQiLCJDSEFOR0VfV0lEVEhfQU5EX0hFSUdIVCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJvbnJlc2l6ZSIsInBhZ2VzSW5pdGlhbFN0YXRlIiwic3RvcmUiLCJzY29sbCIsIlBBR0VTX0lOSVRTVEFURSIsIl9jb25zdGFudHMiLDIxNF0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUSxzQkFBc0JDLFVBQzlCQyxRQUFRQyxLQUFPLEdBQ2ZELFFBQVFFLFNBRUZDLEdBQ0EsU0FBU0MsRUFBUUosRUFBU0ssR0FFL0IsWUE0QkEsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FFdkYsUUFBU0csR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU0MsR0FBMkJDLEVB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QUFTRSxHQUFrQkMsRUFBT0MsR0FDdkMsT0FDRXJJLEtBQU15SCxFQUFNYSxnQkFDWkYsUUFDQUMsU0hpTkh4SixPQUFPZSxlQUFlckMsRUFBUyxjQUM3QnlCLFdBRUZ6QixFR3RQZW9LLHVCSHVQZnBLLEVHaFBlaUYsa0JIaVBmakYsRUcxTmU0SyxtQkE3Q2hCLElBQUFJLEdBQUEzSyxFQUFBLElBQVk2SixFQUFBSixFQUFBa0IsSUhrVU5DLElBQ0EsU0FBUzdLLEVBQVFKLEdJblV2QkksRUFBQUosUUFBQUYsUUFBQSIsImZpbGUiOiIyLmluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZShcInNvdXJjZS1tYXAtc3VwcG9ydFwiKS5pbnN0YWxsKCk7XG5leHBvcnRzLmlkcyA9IFsyXTtcbmV4cG9ydHMubW9kdWxlcyA9IHtcblxuLyoqKi8gNzE6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfanN4ID0gZnVuY3Rpb24gKCkgeyB2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5mb3IgJiYgU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIikgfHwgMHhlYWM3OyByZXR1cm4gZnVuY3Rpb24gY3JlYXRlUmF3UmVhY3RFbGVtZW50KHR5cGUsIHByb3BzLCBrZXksIGNoaWxkcmVuKSB7IHZhciBkZWZhdWx0UHJvcHMgPSB0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzOyB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMzsgaWYgKCFwcm9wcyAmJiBjaGlsZHJlbkxlbmd0aCAhPT0gMCkgeyBwcm9wcyA9IHt9OyB9IGlmIChwcm9wcyAmJiBkZWZhdWx0UHJvcHMpIHsgZm9yICh2YXIgcHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7IGlmIChwcm9wc1twcm9wTmFtZV0gPT09IHZvaWQgMCkgeyBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdOyB9IH0gfSBlbHNlIGlmICghcHJvcHMpIHsgcHJvcHMgPSBkZWZhdWx0UHJvcHMgfHwge307IH0gaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7IHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47IH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7IHZhciBjaGlsZEFycmF5ID0gQXJyYXkoY2hpbGRyZW5MZW5ndGgpOyBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHsgY2hpbGRBcnJheVtpXSA9IGFyZ3VtZW50c1tpICsgM107IH0gcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5OyB9IHJldHVybiB7ICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsIHR5cGU6IHR5cGUsIGtleToga2V5ID09PSB1bmRlZmluZWQgPyBudWxsIDogJycgKyBrZXksIHJlZjogbnVsbCwgcHJvcHM6IHByb3BzLCBfb3duZXI6IG51bGwgfTsgfTsgfSgpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JlYWN0SGVsbWV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX3JlYWN0SGVsbWV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0SGVsbWV0KTtcblx0XG5cdHZhciBfYXBocm9kaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdHZhciBfYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKTtcblx0XG5cdHZhciBfU2Nyb2xsVXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdFxuXHR2YXIgX1Njcm9sbFVwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Njcm9sbFVwKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBfcmVmID0gX2pzeChfcmVhY3RIZWxtZXQyLmRlZmF1bHQsIHtcblx0ICB0aXRsZTogJ+W+ruS/oSBXRUJBUFAnLFxuXHQgIHRpdGxlVGVtcGxhdGU6ICclcyAtIOacjeWKoeerr+a4suafkydcblx0fSk7XG5cdFxuXHR2YXIgX3JlZjIgPSBfanN4KF9TY3JvbGxVcDIuZGVmYXVsdCwge1xuXHQgIHNob3dVbmRlcjogNTAwXG5cdH0pO1xuXHRcblx0dmFyIEFwcCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdCAgX2luaGVyaXRzKEFwcCwgX0NvbXBvbmVudCk7XG5cdFxuXHQgIGZ1bmN0aW9uIEFwcChwcm9wcykge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwcCk7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihBcHApLmNhbGwodGhpcywgcHJvcHMpKTtcblx0ICB9XG5cdCAgLyoqXG5cdCAgICogZGlhcGF0Y2ggZW52aXJvbm1lbnRcblx0ICAgKi9cblx0XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhBcHAsIFt7XG5cdCAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMucHJvcHMuZGlzcGF0Y2g7XG5cdFxuXHQgICAgICBkaXNwYXRjaCgoMCwgX2FjdGlvbnMuaW5pdEVudmlyb25tZW50KSgpKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHJpZ2h0ID0gX2pzeCgnYnV0dG9uJywge30sIHZvaWQgMCwgJ1xcJ3JpZ2h0XFwnJyk7XG5cdCAgICAgIHJldHVybiBfanN4KCdkaXYnLCB7fSwgdm9pZCAwLCBfcmVmLCB0aGlzLnByb3BzLmNoaWxkcmVuLCBfcmVmMik7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQXBwO1xuXHR9KF9yZWFjdC5Db21wb25lbnQpO1xuXHRcblx0QXBwLnByb3BUeXBlcyA9IHtcblx0ICBjaGlsZHJlbjogX3JlYWN0LlByb3BUeXBlcy5ub2RlLFxuXHQgIGRpc3BhdGNoOiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuXHR9O1xuXHRcblx0dmFyIHN0eWxlcyA9IF9hcGhyb2RpdGUuU3R5bGVTaGVldC5jcmVhdGUoe1xuXHQgIHJvb3Q6IHtcblx0ICAgIG1heFdpZHRoOiA3MDAsXG5cdCAgICBjb2xvcjogJyMwMDAnLFxuXHQgICAgbWFyZ2luOiAnMnJlbSBhdXRvJ1xuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcblx0ICB2YXIgZW52aXJvbm1lbnQgPSBzdGF0ZS5lbnZpcm9ubWVudDtcblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGhlaWdodDogZW52aXJvbm1lbnQuaGVpZ2h0LFxuXHQgICAgd2lkdGg6IGVudmlyb25tZW50LndpZHRoLFxuXHQgICAgaXNNb2JpbGU6IGVudmlyb25tZW50LmlzTW9iaWxlXG5cdCAgfTtcblx0fVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcykoQXBwKTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMTA4OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIEBhdXRob3IgIE1pbG9zIEphbmRhXG5cdCAqIEBsaWNlbmNlIE1JVFxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfanN4ID0gZnVuY3Rpb24gKCkgeyB2YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5mb3IgJiYgU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIikgfHwgMHhlYWM3OyByZXR1cm4gZnVuY3Rpb24gY3JlYXRlUmF3UmVhY3RFbGVtZW50KHR5cGUsIHByb3BzLCBrZXksIGNoaWxkcmVuKSB7IHZhciBkZWZhdWx0UHJvcHMgPSB0eXBlICYmIHR5cGUuZGVmYXVsdFByb3BzOyB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMzsgaWYgKCFwcm9wcyAmJiBjaGlsZHJlbkxlbmd0aCAhPT0gMCkgeyBwcm9wcyA9IHt9OyB9IGlmIChwcm9wcyAmJiBkZWZhdWx0UHJvcHMpIHsgZm9yICh2YXIgcHJvcE5hbWUgaW4gZGVmYXVsdFByb3BzKSB7IGlmIChwcm9wc1twcm9wTmFtZV0gPT09IHZvaWQgMCkgeyBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdOyB9IH0gfSBlbHNlIGlmICghcHJvcHMpIHsgcHJvcHMgPSBkZWZhdWx0UHJvcHMgfHwge307IH0gaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7IHByb3BzLmNoaWxkcmVuID0gY2hpbGRyZW47IH0gZWxzZSBpZiAoY2hpbGRyZW5MZW5ndGggPiAxKSB7IHZhciBjaGlsZEFycmF5ID0gQXJyYXkoY2hpbGRyZW5MZW5ndGgpOyBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHsgY2hpbGRBcnJheVtpXSA9IGFyZ3VtZW50c1tpICsgM107IH0gcHJvcHMuY2hpbGRyZW4gPSBjaGlsZEFycmF5OyB9IHJldHVybiB7ICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsIHR5cGU6IHR5cGUsIGtleToga2V5ID09PSB1bmRlZmluZWQgPyBudWxsIDogJycgKyBrZXksIHJlZjogbnVsbCwgcHJvcHM6IHByb3BzLCBfb3duZXI6IG51bGwgfTsgfTsgfSgpO1xuXHRcblx0dmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIFR3ZWVuRnVuY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpO1xuXHR2YXIgU1ZHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX3JlZiA9IF9qc3goJ3NwYW4nLCB7fSwgdm9pZCAwLCBfanN4KFNWRywge1xuXHQgICAgbmFtZTogJ0NoZXZyb25VcENpcmNsZSdcblx0fSkpO1xuXHRcblx0dmFyIFNjcm9sbFVwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXHQgICAgZGlzcGxheU5hbWU6ICdTY3JvbGxVcCcsXG5cdFxuXHRcblx0ICAgIGRhdGE6IHtcblx0ICAgICAgICBzdGFydFZhbHVlOiAwLFxuXHQgICAgICAgIGN1cnJlbnRUaW1lOiAwLCAvLyBzdG9yZSBjdXJyZW50IHRpbWUgb2YgYW5pbWF0aW9uXG5cdCAgICAgICAgc3RhcnRUaW1lOiBudWxsLFxuXHQgICAgICAgIHJhZklkOiBudWxsXG5cdCAgICB9LFxuXHRcblx0ICAgIHByb3BUeXBlczoge1xuXHQgICAgICAgIHRvcFBvc2l0aW9uOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuXHQgICAgICAgIHNob3dVbmRlcjogUmVhY3QuUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLCAvLyBzaG93IGJ1dHRvbiB1bmRlciB0aGlzIHBvc2l0aW9uLFxuXHQgICAgICAgIGVhc2luZzogUmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsnbGluZWFyJywgJ2Vhc2VJblF1YWQnLCAnZWFzZU91dFF1YWQnLCAnZWFzZUluT3V0UXVhZCcsICdlYXNlSW5DdWJpYycsICdlYXNlT3V0Q3ViaWMnLCAnZWFzZUluT3V0Q3ViaWMnLCAnZWFzZUluUXVhcnQnLCAnZWFzZU91dFF1YXJ0JywgJ2Vhc2VJbk91dFF1YXJ0JywgJ2Vhc2VJblF1aW50JywgJ2Vhc2VPdXRRdWludCcsICdlYXNlSW5PdXRRdWludCcsICdlYXNlSW5TaW5lJywgJ2Vhc2VPdXRTaW5lJywgJ2Vhc2VJbk91dFNpbmUnLCAnZWFzZUluRXhwbycsICdlYXNlT3V0RXhwbycsICdlYXNlSW5PdXRFeHBvJywgJ2Vhc2VJbkNpcmMnLCAnZWFzZU91dENpcmMnLCAnZWFzZUluT3V0Q2lyYycsICdlYXNlSW5FbGFzdGljJywgJ2Vhc2VPdXRFbGFzdGljJywgJ2Vhc2VJbk91dEVsYXN0aWMnLCAnZWFzZUluQmFjaycsICdlYXNlT3V0QmFjaycsICdlYXNlSW5PdXRCYWNrJywgJ2Vhc2VJbkJvdW5jZScsICdlYXNlT3V0Qm91bmNlJywgJ2Vhc2VJbk91dEJvdW5jZSddKSxcblx0ICAgICAgICBkdXJhdGlvbjogUmVhY3QuUHJvcFR5cGVzLm51bWJlciwgLy8gc2Vjb25kc1xuXHQgICAgICAgIHN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAsXG5cdCAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG5cdCAgICAgICAgICAgIHN0eWxlOiB7XG5cdCAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcblx0ICAgICAgICAgICAgICAgIGJvdHRvbTogNTAsXG5cdCAgICAgICAgICAgICAgICByaWdodDogMzAsXG5cdCAgICAgICAgICAgICAgICAvLyBjdXJzb3I6ICdwb2ludGVyJyxcblx0ICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogJzAuM3MnLFxuXHQgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiAnbGluZWFyJyxcblx0ICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogJzBzJyxcblx0XG5cdCAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuXHQgICAgICAgICAgICAgICAgd2lkdGg6ICc1MHB4Jyxcblx0ICAgICAgICAgICAgICAgIGhlaWdodDogJzUwcHgnLFxuXHQgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcblx0ICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICc1MHB4Jyxcblx0ICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdCAgICAgICAgICAgICAgICBmb250U2l6ZTogJzQ1cHgnLFxuXHQgICAgICAgICAgICAgICAgY29sb3I6ICcjRjA2MDY2Jyxcblx0ICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcblx0ICAgICAgICAgICAgICAgIHpJbmRleDogJzk5OTknXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHRvcFBvc2l0aW9uOiAwXG5cdCAgICAgICAgfTtcblx0ICAgIH0sXG5cdCAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBzaG93OiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICB9LFxuXHQgICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlOiBmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gbmV4dFN0YXRlLnNob3cgIT09IHRoaXMuc3RhdGUuc2hvdztcblx0ICAgIH0sXG5cdCAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGwoKTsgLy8gaW5pdGlhbGl6ZSBzdGF0ZVxuXHQgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCk7XG5cdCAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCB0aGlzLnN0b3BTY3JvbGxpbmcsIGZhbHNlKTtcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5zdG9wU2Nyb2xsaW5nLCBmYWxzZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwpO1xuXHQgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5zdG9wU2Nyb2xsaW5nLCBmYWxzZSk7XG5cdCAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuc3RvcFNjcm9sbGluZywgZmFsc2UpO1xuXHQgICAgfSxcblx0XG5cdCAgICBoYW5kbGVTY3JvbGw6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCgpIHtcblx0ICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPiB0aGlzLnByb3BzLnNob3dVbmRlcikge1xuXHQgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvdzogdHJ1ZSB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvdzogZmFsc2UgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljaygpIHtcblx0ICAgICAgICB0aGlzLnN0b3BTY3JvbGxpbmcoKTtcblx0ICAgICAgICB0aGlzLmRhdGEuc3RhcnRWYWx1ZSA9IHdpbmRvdy5zY3JvbGxZO1xuXHQgICAgICAgIHRoaXMuZGF0YS5jdXJyZW50VGltZSA9IDA7XG5cdCAgICAgICAgdGhpcy5kYXRhLnN0YXJ0VGltZSA9IG51bGw7XG5cdCAgICAgICAgdGhpcy5kYXRhLnJhZklkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnNjcm9sbFN0ZXApO1xuXHQgICAgfSxcblx0XG5cdCAgICBzY3JvbGxTdGVwOiBmdW5jdGlvbiBzY3JvbGxTdGVwKHRpbWVzdGFtcCkge1xuXHQgICAgICAgIGlmICghdGhpcy5kYXRhLnN0YXJ0VGltZSkge1xuXHQgICAgICAgICAgICB0aGlzLmRhdGEuc3RhcnRUaW1lID0gdGltZXN0YW1wO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5kYXRhLmN1cnJlbnRUaW1lID0gdGltZXN0YW1wIC0gdGhpcy5kYXRhLnN0YXJ0VGltZTtcblx0XG5cdCAgICAgICAgdmFyIHBvc2l0aW9uID0gVHdlZW5GdW5jdGlvbnNbdGhpcy5wcm9wcy5lYXNpbmddKHRoaXMuZGF0YS5jdXJyZW50VGltZSwgdGhpcy5kYXRhLnN0YXJ0VmFsdWUsIHRoaXMucHJvcHMudG9wUG9zaXRpb24sIHRoaXMucHJvcHMuZHVyYXRpb24pO1xuXHRcblx0ICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPD0gdGhpcy5wcm9wcy50b3BQb3NpdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLnN0b3BTY3JvbGxpbmcoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8od2luZG93LnNjcm9sbFksIHBvc2l0aW9uKTtcblx0ICAgICAgICAgICAgdGhpcy5kYXRhLnJhZklkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnNjcm9sbFN0ZXApO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgc3RvcFNjcm9sbGluZzogZnVuY3Rpb24gc3RvcFNjcm9sbGluZygpIHtcblx0ICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5kYXRhLnJhZklkKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgdmFyIHByb3BTdHlsZSA9IHRoaXMucHJvcHMuc3R5bGU7XG5cdCAgICAgICAgdmFyIGVsZW1lbnQgPSBfanN4KCdkaXYnLCB7XG5cdCAgICAgICAgICAgIHN0eWxlOiBwcm9wU3R5bGUsXG5cdCAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2tcblx0ICAgICAgICB9LCB2b2lkIDAsIF9yZWYpO1xuXHRcblx0ICAgICAgICB2YXIgc3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBwcm9wU3R5bGUpO1xuXHQgICAgICAgIHN0eWxlLm9wYWNpdHkgPSB0aGlzLnN0YXRlLnNob3cgPyAwLjggOiAwO1xuXHQgICAgICAgIHN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLnN0YXRlLnNob3cgPyAndmlzaWJsZScgOiAnaGlkZGVuJztcblx0ICAgICAgICBzdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAnb3BhY2l0eSwgdmlzaWJpbGl0eSc7XG5cdFxuXHQgICAgICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoZWxlbWVudCwgeyBzdHlsZTogc3R5bGUgfSk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTY3JvbGxVcDtcblxuLyoqKi8gfSxcblxuLyoqKi8gMTEyOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuY2hhbmdlV2lkdGhBbmRIZWlnaHQgPSBjaGFuZ2VXaWR0aEFuZEhlaWdodDtcblx0ZXhwb3J0cy5pbml0RW52aXJvbm1lbnQgPSBpbml0RW52aXJvbm1lbnQ7XG5cdGV4cG9ydHMucGFnZXNJbml0aWFsU3RhdGUgPSBwYWdlc0luaXRpYWxTdGF0ZTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHR2YXIgdHlwZXMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfY29uc3RhbnRzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cdFxuXHQvKipcblx0ICogZW52aXJvbm1lbnRcblx0ICogXG5cdCAqIOaJgOWxnueOr+Wig1xuXHQgKiBcblx0ICovXG5cdGZ1bmN0aW9uIGNoYW5nZUlzTW9iaWxlKGlzTW9iaWxlKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHR5cGU6IHR5cGVzLkNIQU5HRV9JU19NT0JJTEUsXG5cdCAgICBpc01vYmlsZTogaXNNb2JpbGVcblx0ICB9O1xuXHR9XG5cdGZ1bmN0aW9uIGNoYW5nZVdpZHRoQW5kSGVpZ2h0KGhlaWdodCwgd2lkdGgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogdHlwZXMuQ0hBTkdFX1dJRFRIX0FORF9IRUlHSFQsXG5cdCAgICBoZWlnaHQ6IGhlaWdodCxcblx0ICAgIHdpZHRoOiB3aWR0aFxuXHQgIH07XG5cdH1cblx0ZnVuY3Rpb24gaW5pdEVudmlyb25tZW50KCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHtcblx0ICAgIC8vIOWIpOaWreehrOS7tlxuXHQgICAgdmFyIGlzTW9iaWxlID0gL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcblx0ICAgIGlmIChpc01vYmlsZSkge31cblx0ICAgIC8vIHRvIGRvIHNvbXRoaW5nXG5cdFxuXHQgICAgLy8g5YGa5Ye65pS55Y+YXG5cdCAgICBkaXNwYXRjaChjaGFuZ2VJc01vYmlsZShpc01vYmlsZSkpO1xuXHQgICAgZGlzcGF0Y2goY2hhbmdlV2lkdGhBbmRIZWlnaHQod2luZG93LmlubmVySGVpZ2h0LCB3aW5kb3cuaW5uZXJXaWR0aCkpO1xuXHQgICAgLy8g5pS55Y+Y56qX5Y+j5pe2XG5cdCAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRpc3BhdGNoKGNoYW5nZVdpZHRoQW5kSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCwgd2luZG93LmlubmVyV2lkdGgpKTtcblx0ICAgIH07XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFtwYWdlc0luaXRpYWxTdGF0ZSDpobXpnaLlrZjlgqhdXG5cdCAqIEBwYXJhbSAge1t0eXBlXX0gc3RvcmUgW+aVsOaNrua1gV1cblx0ICogQHBhcmFtICB7W3R5cGVdfSBzY29sbCBb5rua5Yqo5L2N572uXVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFnZXNJbml0aWFsU3RhdGUoc3RvcmUsIHNjb2xsKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHR5cGU6IHR5cGVzLlBBR0VTX0lOSVRTVEFURSxcblx0ICAgIHN0b3JlOiBzdG9yZSxcblx0ICAgIHNjb2xsOiBzY29sbFxuXHQgIH07XG5cdH1cblxuLyoqKi8gfSxcblxuLyoqKi8gMjE0OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidHdlZW4tZnVuY3Rpb25zXCIpO1xuXG4vKioqLyB9XG5cbn07O1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIDIuaW5kZXguanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBIZWxtZXQgZnJvbSAncmVhY3QtaGVsbWV0J1xuaW1wb3J0IHsgU3R5bGVTaGVldCwgY3NzIH0gZnJvbSAnYXBocm9kaXRlJ1xuXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgeyBpbml0RW52aXJvbm1lbnQgfSBmcm9tICcuLi9hY3Rpb25zLmpzJ1xuXG5pbXBvcnQgU2Nyb2xsVXAgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9TY3JvbGxVcCdcblxuY2xhc3MgQXBwIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgfVxuICAvKipcbiAgICogZGlhcGF0Y2ggZW52aXJvbm1lbnRcbiAgICovXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHtkaXNwYXRjaH0gPSB0aGlzLnByb3BzXG4gICAgZGlzcGF0Y2goaW5pdEVudmlyb25tZW50KCkpXG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJpZ2h0ID0gPGJ1dHRvbj4ncmlnaHQnPC9idXR0b24+XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxIZWxtZXRcbiAgICAgICAgICB0aXRsZT1cIuW+ruS/oSBXRUJBUFBcIlxuICAgICAgICAgIHRpdGxlVGVtcGxhdGU9XCIlcyAtIOacjeWKoeerr+a4suafk1wiIC8+XG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICA8U2Nyb2xsVXAgc2hvd1VuZGVyPXs1MDB9IC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuQXBwLnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuICBkaXNwYXRjaDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIHJvb3Q6IHtcbiAgICBtYXhXaWR0aDogNzAwLFxuICAgIGNvbG9yOiAnIzAwMCcsXG4gICAgbWFyZ2luOiAnMnJlbSBhdXRvJyxcbiAgfVxufSlcblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlKSB7XG4gIGNvbnN0IHsgZW52aXJvbm1lbnQgfSA9IHN0YXRlXG4gIHJldHVybiB7XG4gICAgaGVpZ2h0OiBlbnZpcm9ubWVudC5oZWlnaHQsXG4gICAgd2lkdGg6IGVudmlyb25tZW50LndpZHRoLFxuICAgIGlzTW9iaWxlOiBlbnZpcm9ubWVudC5pc01vYmlsZVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXG4gIG1hcFN0YXRlVG9Qcm9wc1xuKShBcHApXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvcm91dGVzL0FwcC9jb21wb25lbnRzL0FwcC5qc1xuICoqLyIsIi8qKlxuICogQGF1dGhvciAgTWlsb3MgSmFuZGFcbiAqIEBsaWNlbmNlIE1JVFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBUd2VlbkZ1bmN0aW9ucyA9IHJlcXVpcmUoJ3R3ZWVuLWZ1bmN0aW9ucycpO1xudmFyIFNWRyA9IHJlcXVpcmUoJy4vU1ZHJylcblxudmFyIFNjcm9sbFVwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gICAgZGF0YToge1xuICAgICAgICBzdGFydFZhbHVlOiAwLFxuICAgICAgICBjdXJyZW50VGltZTogMCwgLy8gc3RvcmUgY3VycmVudCB0aW1lIG9mIGFuaW1hdGlvblxuICAgICAgICBzdGFydFRpbWU6IG51bGwsXG4gICAgICAgIHJhZklkOiBudWxsXG4gICAgfSxcblxuICAgIHByb3BUeXBlczoge1xuICAgICAgICB0b3BQb3NpdGlvbjogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICAgICAgc2hvd1VuZGVyOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsIC8vIHNob3cgYnV0dG9uIHVuZGVyIHRoaXMgcG9zaXRpb24sXG4gICAgICAgIGVhc2luZzogUmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsnbGluZWFyJywgJ2Vhc2VJblF1YWQnLCAnZWFzZU91dFF1YWQnLCAnZWFzZUluT3V0UXVhZCcsICdlYXNlSW5DdWJpYycsXG4gICAgICAgICAgICAnZWFzZU91dEN1YmljJywgJ2Vhc2VJbk91dEN1YmljJywgJ2Vhc2VJblF1YXJ0JywgJ2Vhc2VPdXRRdWFydCcsICdlYXNlSW5PdXRRdWFydCcsICdlYXNlSW5RdWludCcsXG4gICAgICAgICAgICAnZWFzZU91dFF1aW50JywgJ2Vhc2VJbk91dFF1aW50JywgJ2Vhc2VJblNpbmUnLCAnZWFzZU91dFNpbmUnLCAnZWFzZUluT3V0U2luZScsICdlYXNlSW5FeHBvJywgJ2Vhc2VPdXRFeHBvJyxcbiAgICAgICAgICAgICdlYXNlSW5PdXRFeHBvJywgJ2Vhc2VJbkNpcmMnLCAnZWFzZU91dENpcmMnLCAnZWFzZUluT3V0Q2lyYycsICdlYXNlSW5FbGFzdGljJywgJ2Vhc2VPdXRFbGFzdGljJyxcbiAgICAgICAgICAgICdlYXNlSW5PdXRFbGFzdGljJywgJ2Vhc2VJbkJhY2snLCAnZWFzZU91dEJhY2snLCAnZWFzZUluT3V0QmFjaycsICdlYXNlSW5Cb3VuY2UnLCAnZWFzZU91dEJvdW5jZScsXG4gICAgICAgICAgICAnZWFzZUluT3V0Qm91bmNlJ10pLFxuICAgICAgICBkdXJhdGlvbjogUmVhY3QuUHJvcFR5cGVzLm51bWJlciwgLy8gc2Vjb25kc1xuICAgICAgICBzdHlsZTogUmVhY3QuUHJvcFR5cGVzLm9iamVjdFxuICAgIH0sXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLFxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICBib3R0b206IDUwLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiAzMCxcbiAgICAgICAgICAgICAgICAvLyBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcwLjNzJyxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246ICdsaW5lYXInLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogJzBzJyxcblxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICc1MHB4JyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICc1MHB4JyxcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6ICc1MHB4JyxcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnNDVweCcsXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjRjA2MDY2JyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgekluZGV4OiAnOTk5OSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b3BQb3NpdGlvbjogMFxuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZTogZnVuY3Rpb24gKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIHJldHVybiBuZXh0U3RhdGUuc2hvdyAhPT0gdGhpcy5zdGF0ZS5zaG93O1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGwoKTsgLy8gaW5pdGlhbGl6ZSBzdGF0ZVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRoaXMuc3RvcFNjcm9sbGluZywgZmFsc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5zdG9wU2Nyb2xsaW5nLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5zdG9wU2Nyb2xsaW5nLCBmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLnN0b3BTY3JvbGxpbmcsIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgaGFuZGxlU2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IHRoaXMucHJvcHMuc2hvd1VuZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93OiB0cnVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93OiBmYWxzZX0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0b3BTY3JvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5kYXRhLnN0YXJ0VmFsdWUgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgICAgICAgdGhpcy5kYXRhLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgdGhpcy5kYXRhLnN0YXJ0VGltZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZGF0YS5yYWZJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zY3JvbGxTdGVwKTtcbiAgICB9LFxuXG4gICAgc2Nyb2xsU3RlcDogZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YS5zdGFydFRpbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5zdGFydFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRhdGEuY3VycmVudFRpbWUgPSB0aW1lc3RhbXAgLSB0aGlzLmRhdGEuc3RhcnRUaW1lO1xuXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IFR3ZWVuRnVuY3Rpb25zW3RoaXMucHJvcHMuZWFzaW5nXShcbiAgICAgICAgICAgIHRoaXMuZGF0YS5jdXJyZW50VGltZSxcbiAgICAgICAgICAgIHRoaXMuZGF0YS5zdGFydFZhbHVlLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy50b3BQb3NpdGlvbixcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZHVyYXRpb25cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPD0gdGhpcy5wcm9wcy50b3BQb3NpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zdG9wU2Nyb2xsaW5nKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8od2luZG93LnNjcm9sbFksIHBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5yYWZJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zY3JvbGxTdGVwKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmRhdGEucmFmSWQpO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByb3BTdHlsZSA9IHRoaXMucHJvcHMuc3R5bGU7XG4gICAgICAgIHZhciBlbGVtZW50ID1cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3Byb3BTdHlsZX0gb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG4gICAgICAgICAgICAgICAgPHNwYW4+PFNWRyBuYW1lPVwiQ2hldnJvblVwQ2lyY2xlXCIgLz48L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj47XG5cbiAgICAgICAgdmFyIHN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcFN0eWxlKTtcbiAgICAgICAgc3R5bGUub3BhY2l0eSA9IHRoaXMuc3RhdGUuc2hvdyA/IDAuOCA6IDA7XG4gICAgICAgIHN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLnN0YXRlLnNob3cgPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbiAgICAgICAgc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJ29wYWNpdHksIHZpc2liaWxpdHknO1xuXG4gICAgICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoZWxlbWVudCwge3N0eWxlOiBzdHlsZX0pO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjcm9sbFVwOyBcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9jb21wb25lbnRzL1Njcm9sbFVwLmpzXG4gKiovIiwiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vLi4vY29uc3RhbnRzLmpzJ1xuXG5cbi8qKlxuICogZW52aXJvbm1lbnRcbiAqIFxuICog5omA5bGe546v5aKDXG4gKiBcbiAqL1xuZnVuY3Rpb24gY2hhbmdlSXNNb2JpbGUoaXNNb2JpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiB0eXBlcy5DSEFOR0VfSVNfTU9CSUxFLFxuICAgIGlzTW9iaWxlXG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VXaWR0aEFuZEhlaWdodChoZWlnaHQsIHdpZHRoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogdHlwZXMuQ0hBTkdFX1dJRFRIX0FORF9IRUlHSFQsXG4gICAgaGVpZ2h0LFxuICAgIHdpZHRoXG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0RW52aXJvbm1lbnQoKSB7XG4gIHJldHVybiBkaXNwYXRjaCA9PiB7XG4gICAgLy8g5Yik5pat56Gs5Lu2XG4gICAgY29uc3QgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpXG4gICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICAvLyB0byBkbyBzb210aGluZ1xuICAgIH1cbiAgICAvLyDlgZrlh7rmlLnlj5hcbiAgICBkaXNwYXRjaChjaGFuZ2VJc01vYmlsZShpc01vYmlsZSkpXG4gICAgZGlzcGF0Y2goY2hhbmdlV2lkdGhBbmRIZWlnaHQod2luZG93LmlubmVySGVpZ2h0LCB3aW5kb3cuaW5uZXJXaWR0aCkpXG4gICAgLy8g5pS55Y+Y56qX5Y+j5pe2XG4gICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goY2hhbmdlV2lkdGhBbmRIZWlnaHQod2luZG93LmlubmVySGVpZ2h0LCB3aW5kb3cuaW5uZXJXaWR0aCkpXG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBbcGFnZXNJbml0aWFsU3RhdGUg6aG16Z2i5a2Y5YKoXVxuICogQHBhcmFtICB7W3R5cGVdfSBzdG9yZSBb5pWw5o2u5rWBXVxuICogQHBhcmFtICB7W3R5cGVdfSBzY29sbCBb5rua5Yqo5L2N572uXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFnZXNJbml0aWFsU3RhdGUoc3RvcmUsIHNjb2xsKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogdHlwZXMuUEFHRVNfSU5JVFNUQVRFLFxuICAgIHN0b3JlLFxuICAgIHNjb2xsXG4gIH1cbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9yb3V0ZXMvQXBwL2FjdGlvbnMuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ0d2Vlbi1mdW5jdGlvbnNcIik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcInR3ZWVuLWZ1bmN0aW9uc1wiXG4gKiogbW9kdWxlIGlkID0gMjE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9